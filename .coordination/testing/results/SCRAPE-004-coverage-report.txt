============================= test session starts ==============================
platform darwin -- Python 3.11.1, pytest-8.4.2, pluggy-1.6.0 -- /Users/tsvikavagman/Desktop/Code Projects/shared-tools/n8n-scraper/venv/bin/python3.11
cachedir: .pytest_cache
rootdir: /Users/tsvikavagman/Desktop/Code Projects/shared-tools/n8n-scraper
configfile: pytest.ini
plugins: asyncio-1.2.0, cov-7.0.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 47 items

tests/unit/test_validation.py::TestLayer1Validator::test_validator_initialization PASSED [  2%]
tests/unit/test_validation.py::TestLayer1Validator::test_validate_perfect_metadata PASSED [  4%]
tests/unit/test_validation.py::TestLayer1Validator::test_validate_poor_metadata PASSED [  6%]
tests/unit/test_validation.py::TestLayer1Validator::test_validate_missing_title PASSED [  8%]
tests/unit/test_validation.py::TestLayer1Validator::test_validate_short_description PASSED [ 10%]
tests/unit/test_validation.py::TestLayer1Validator::test_validate_no_tags PASSED [ 12%]
tests/unit/test_validation.py::TestLayer2Validator::test_validator_initialization PASSED [ 14%]
tests/unit/test_validation.py::TestLayer2Validator::test_validate_perfect_json PASSED [ 17%]
tests/unit/test_validation.py::TestLayer2Validator::test_validate_empty_json PASSED [ 19%]
tests/unit/test_validation.py::TestLayer2Validator::test_validate_missing_nodes PASSED [ 21%]
tests/unit/test_validation.py::TestLayer2Validator::test_validate_invalid_node_structure PASSED [ 23%]
tests/unit/test_validation.py::TestLayer3Validator::test_validator_initialization PASSED [ 25%]
tests/unit/test_validation.py::TestLayer3Validator::test_validate_perfect_content PASSED [ 27%]
tests/unit/test_validation.py::TestLayer3Validator::test_validate_missing_content PASSED [ 29%]
tests/unit/test_validation.py::TestLayer3Validator::test_validate_short_tutorial_text PASSED [ 31%]
tests/unit/test_validation.py::TestQualityScorer::test_scorer_initialization PASSED [ 34%]
tests/unit/test_validation.py::TestQualityScorer::test_calculate_perfect_score PASSED [ 36%]
tests/unit/test_validation.py::TestQualityScorer::test_calculate_good_score PASSED [ 38%]
tests/unit/test_validation.py::TestQualityScorer::test_calculate_fair_score PASSED [ 40%]
tests/unit/test_validation.py::TestQualityScorer::test_calculate_poor_score PASSED [ 42%]
tests/unit/test_validation.py::TestQualityScorer::test_calculate_with_missing_layers PASSED [ 44%]
tests/unit/test_validation.py::TestQualityScorer::test_classify_excellent PASSED [ 46%]
tests/unit/test_validation.py::TestQualityScorer::test_classify_good PASSED [ 48%]
tests/unit/test_validation.py::TestQualityScorer::test_classify_fair PASSED [ 51%]
tests/unit/test_validation.py::TestQualityScorer::test_classify_poor PASSED [ 53%]
tests/unit/test_validation.py::TestQualityScorer::test_consistency_all_layers PASSED [ 55%]
tests/unit/test_validation.py::TestQualityScorer::test_consistency_two_layers PASSED [ 57%]
tests/unit/test_validation.py::TestQualityScorer::test_consistency_one_layer PASSED [ 59%]
tests/unit/test_validation.py::TestQualityScorer::test_consistency_no_layers PASSED [ 61%]
tests/unit/test_validation.py::TestValidationDatabase::test_database_initialization PASSED [ 63%]
tests/unit/test_validation.py::TestValidationDatabase::test_create_tables PASSED [ 65%]
tests/unit/test_validation.py::TestValidationDatabase::test_store_quality_score PASSED [ 68%]
tests/unit/test_validation.py::TestValidationDatabase::test_store_validation_issue PASSED [ 70%]
tests/unit/test_validation.py::TestValidationDatabase::test_get_quality_scores_filtered PASSED [ 72%]
tests/unit/test_validation.py::TestValidationDatabase::test_get_stats PASSED [ 74%]
tests/unit/test_validation.py::TestValidationDatabase::test_update_existing_score PASSED [ 76%]
tests/unit/test_validation.py::TestIntegratedValidation::test_complete_validation_flow PASSED [ 78%]
tests/unit/test_validation.py::TestIntegratedValidation::test_layer1_medium_quality_metadata PASSED [ 80%]
tests/unit/test_validation.py::TestIntegratedValidation::test_layer2_with_one_node_type PASSED [ 82%]
tests/unit/test_validation.py::TestIntegratedValidation::test_layer3_with_minimal_sections PASSED [ 85%]
tests/unit/test_validation.py::TestIntegratedValidation::test_scorer_get_classification_summary PASSED [ 87%]
tests/unit/test_validation.py::TestIntegratedValidation::test_scorer_empty_scores_list PASSED [ 89%]
tests/integration/test_validation_integration.py::TestValidationIntegration::test_end_to_end_validation_pipeline PASSED [ 91%]
tests/integration/test_validation_integration.py::TestValidationIntegration::test_multi_workflow_validation PASSED [ 93%]
tests/integration/test_validation_integration.py::TestValidationIntegration::test_quality_classification_distribution PASSED [ 95%]
tests/integration/test_validation_integration.py::TestValidationIntegration::test_issue_tracking_across_layers PASSED [ 97%]
tests/integration/test_validation_integration.py::TestValidationIntegration::test_validation_statistics PASSED [100%]

=============================== warnings summary ===============================
src/database/schema.py:12
  /Users/tsvikavagman/Desktop/Code Projects/shared-tools/n8n-scraper/src/database/schema.py:12: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    Base = declarative_base()

src/database/validation_schema.py:16
  /Users/tsvikavagman/Desktop/Code Projects/shared-tools/n8n-scraper/src/database/validation_schema.py:16: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    Base = declarative_base()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform darwin, python 3.11.1-final-0 _______________

Name                                         Stmts   Miss   Cover   Missing
---------------------------------------------------------------------------
src/__init__.py                                  0      0 100.00%
src/database/__init__.py                         0      0 100.00%
src/database/inventory_schema.py               101    101   0.00%   6-242
src/database/json_schema.py                     91     91   0.00%   6-195
src/database/schema.py                          99      9  90.91%   159-175, 188-198, 211
src/database/validation_schema.py              132     29  78.03%   75-77, 117-120, 142-145, 173-175, 189, 204-206, 245-247, 254-265
src/models/__init__.py                           0      0 100.00%
src/orchestrator/__init__.py                     0      0 100.00%
src/parsers/__init__.py                          0      0 100.00%
src/scrapers/__init__.py                         0      0 100.00%
src/scrapers/layer1_metadata.py                346    346   0.00%   12-701
src/scrapers/layer2_json.py                    100    100   0.00%   6-278
src/scrapers/layer3_explainer.py               264    264   0.00%   12-592
src/scrapers/multimodal_processor.py           342    342   0.00%   12-768
src/scrapers/workflow_inventory_crawler.py      89     89   0.00%   6-174
src/utils/__init__.py                            0      0 100.00%
src/utils/logging.py                            38     38   0.00%   6-121
src/validation/__init__.py                       1      0 100.00%
src/validation/layer1_validator.py              73     14  80.82%   40-41, 86-87, 125-157
src/validation/layer2_validator.py              74     19  74.32%   45-46, 53, 68-69, 76, 86-87, 92, 126-159
src/validation/layer3_validator.py              67     11  83.58%   56-57, 72, 74-75, 115-144
src/validation/quality_scorer.py                61      8  86.89%   189-200
---------------------------------------------------------------------------
TOTAL                                         1878   1461  22.20%
Coverage HTML written to dir htmlcov
======================== 47 passed, 2 warnings in 0.87s ========================
