============================= test session starts ==============================
platform darwin -- Python 3.11.1, pytest-8.4.2, pluggy-1.6.0 -- /Users/tsvikavagman/Desktop/Code Projects/shared-tools/n8n-scraper/venv/bin/python
cachedir: .pytest_cache
rootdir: /Users/tsvikavagman/Desktop/Code Projects/shared-tools/n8n-scraper
configfile: pytest.ini
plugins: asyncio-1.2.0, cov-7.0.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 31 items

tests/unit/test_multimodal_unified.py::TestMultimodalProcessorInitialization::test_init_default_parameters PASSED [  3%]
tests/unit/test_multimodal_unified.py::TestMultimodalProcessorInitialization::test_init_custom_parameters PASSED [  6%]
tests/unit/test_multimodal_unified.py::TestVideoIdExtraction::test_extract_youtube_video_id_standard_url PASSED [  9%]
tests/unit/test_multimodal_unified.py::TestVideoIdExtraction::test_extract_youtube_video_id_short_url PASSED [ 12%]
tests/unit/test_multimodal_unified.py::TestVideoIdExtraction::test_extract_youtube_video_id_embed_url PASSED [ 16%]
tests/unit/test_multimodal_unified.py::TestVideoIdExtraction::test_extract_youtube_video_id_with_parameters PASSED [ 19%]
tests/unit/test_multimodal_unified.py::TestVideoIdExtraction::test_extract_youtube_video_id_invalid_url PASSED [ 22%]
tests/unit/test_multimodal_unified.py::TestVideoIdExtraction::test_extract_youtube_video_id_empty_url PASSED [ 25%]
tests/unit/test_multimodal_unified.py::TestVideoIdExtraction::test_extract_youtube_video_id_none_url PASSED [ 29%]
tests/unit/test_multimodal_unified.py::TestElementTypeDetermination::test_determine_element_type_hint PASSED [ 32%]
tests/unit/test_multimodal_unified.py::TestElementTypeDetermination::test_determine_element_type_instruction PASSED [ 35%]
tests/unit/test_multimodal_unified.py::TestElementTypeDetermination::test_determine_element_type_tutorial PASSED [ 38%]
tests/unit/test_multimodal_unified.py::TestElementTypeDetermination::test_determine_element_type_tutorial_box PASSED [ 41%]
tests/unit/test_multimodal_unified.py::TestElementTypeDetermination::test_determine_element_type_setup_instruction PASSED [ 45%]
tests/unit/test_multimodal_unified.py::TestElementTypeDetermination::test_determine_element_type_general_text PASSED [ 48%]
tests/unit/test_multimodal_unified.py::TestElementTypeDetermination::test_determine_element_type_with_none_inputs PASSED [ 51%]
tests/unit/test_multimodal_unified.py::TestElementTypeDetermination::test_determine_element_type_with_empty_strings PASSED [ 54%]
tests/unit/test_multimodal_unified.py::TestDatabaseOperations::test_store_image_data_creates_new_workflow PASSED [ 58%]
tests/unit/test_multimodal_unified.py::TestDatabaseOperations::test_store_image_data_appends_to_existing_workflow PASSED [ 61%]
tests/unit/test_multimodal_unified.py::TestDatabaseOperations::test_store_video_data_creates_new_workflow PASSED [ 64%]
tests/unit/test_multimodal_unified.py::TestDatabaseOperations::test_store_video_data_appends_to_existing_workflow PASSED [ 67%]
tests/unit/test_multimodal_unified.py::TestDatabaseOperations::test_store_image_data_with_empty_text PASSED [ 70%]
tests/unit/test_multimodal_unified.py::TestDatabaseOperations::test_store_video_data_with_null_transcript PASSED [ 74%]
tests/unit/test_multimodal_unified.py::TestDatabaseOperations::test_store_image_data_with_special_characters PASSED [ 77%]
tests/unit/test_multimodal_unified.py::TestDatabaseOperations::test_store_image_data_with_long_content PASSED [ 80%]
tests/unit/test_multimodal_unified.py::TestErrorHandling::test_extract_video_id_from_url_with_malformed_url PASSED [ 83%]
tests/unit/test_multimodal_unified.py::TestErrorHandling::test_determine_element_type_handles_none_gracefully PASSED [ 87%]
tests/unit/test_multimodal_unified.py::TestErrorHandling::test_determine_element_type_handles_empty_text PASSED [ 90%]
tests/unit/test_multimodal_unified.py::TestAsyncContextManagement::test_async_context_manager_initialization PASSED [ 93%]
tests/unit/test_multimodal_unified.py::TestDataIntegrity::test_multiple_operations_maintain_data_integrity PASSED [ 96%]
tests/unit/test_multimodal_unified.py::TestDataIntegrity::test_json_structure_is_valid PASSED [100%]

=============================== warnings summary ===============================
src/database/schema.py:12
  /Users/tsvikavagman/Desktop/Code Projects/shared-tools/n8n-scraper/src/database/schema.py:12: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    Base = declarative_base()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform darwin, python 3.11.1-final-0 _______________

Name                                         Stmts   Miss   Cover   Missing
---------------------------------------------------------------------------
src/__init__.py                                  0      0 100.00%
src/database/__init__.py                         0      0 100.00%
src/database/inventory_schema.py               101    101   0.00%   6-242
src/database/json_schema.py                     91     91   0.00%   6-195
src/database/schema.py                          99      9  90.91%   159-175, 188-198, 211
src/database/validation_schema.py              132    132   0.00%   6-265
src/models/__init__.py                           0      0 100.00%
src/orchestrator/__init__.py                     0      0 100.00%
src/parsers/__init__.py                          0      0 100.00%
src/scrapers/__init__.py                         0      0 100.00%
src/scrapers/layer1_metadata.py                346    346   0.00%   12-701
src/scrapers/layer2_json.py                    100    100   0.00%   6-278
src/scrapers/layer3_explainer.py               264    264   0.00%   12-592
src/scrapers/multimodal_processor.py           342    236  30.99%   98-127, 140-219, 242, 244, 261-282, 295-330, 370-457, 504, 634-746, 753-768
src/scrapers/workflow_inventory_crawler.py      89     89   0.00%   6-174
src/utils/__init__.py                            0      0 100.00%
src/utils/logging.py                            38     38   0.00%   6-121
src/validation/__init__.py                       1      1   0.00%   6
src/validation/layer1_validator.py              73     73   0.00%   6-157
src/validation/layer2_validator.py              74     74   0.00%   6-159
src/validation/layer3_validator.py              67     67   0.00%   6-144
src/validation/quality_scorer.py                61     61   0.00%   6-200
---------------------------------------------------------------------------
TOTAL                                         1878   1682  10.44%
Coverage HTML written to dir htmlcov
======================== 31 passed, 1 warning in 1.19s =========================
